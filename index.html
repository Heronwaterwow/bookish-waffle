<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Wallet Detector dApp</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            text-align: center;
            max-width: 500px;
            width: 100%;
        }

        h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 28px;
        }

        .info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
        }

        .info h3 {
            color: #495057;
            margin-bottom: 10px;
        }

        .info p {
            color: #6c757d;
            line-height: 1.5;
            margin: 5px 0;
        }

        .connect-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            margin: 20px 0;
        }

        .connect-btn:hover {
            transform: translateY(-2px);
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s;
        }

        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            position: relative;
            animation: slideIn 0.3s;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 20px;
            top: 15px;
        }

        .close:hover {
            color: #000;
        }

        .wallet-list {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }

        .wallet-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .wallet-item:hover {
            border-color: #667eea;
            background-color: #f8f9ff;
        }

        .wallet-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }

        .phantom { background: #ab9ff2; }
        .safepal { background: #1890ff; }
        .trust { background: #3375bb; }
        .coinbase { background: #0052ff; }
        .metamask { background: #f6851b; }

        .instruction-modal .modal-content {
            text-align: center;
        }

        .instruction-steps {
            text-align: left;
            margin: 20px 0;
        }

        .instruction-steps li {
            margin: 10px 0;
            padding-left: 10px;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîó Wallet Connector</h1>
        
        <div class="info">
            <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ:</h3>
            <p><strong>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:</strong> <span id="deviceInfo">–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è...</span></p>
            <p><strong>–ë—Ä–∞—É–∑–µ—Ä:</strong> <span id="browserInfo">–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è...</span></p>
            <p><strong>–ö–æ—à–µ–ª—ë–∫:</strong> <span id="walletInfo">–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è...</span></p>
        </div>

        <button class="connect-btn" onclick="handleWalletConnection()">
            –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫
        </button>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –∫–æ—à–µ–ª—å–∫–æ–≤ -->
    <div id="walletModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('walletModal')">&times;</span>
            <h2>–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ—à–µ–ª—ë–∫</h2>
            <div class="wallet-list">
                <div class="wallet-item" onclick="connectWallet('phantom')">
                    <div class="wallet-icon phantom">P</div>
                    <div>
                        <strong>Phantom</strong>
                        <div style="font-size: 12px; color: #666;">Solana –∫–æ—à–µ–ª—ë–∫</div>
                    </div>
                </div>
                <div class="wallet-item" onclick="connectWallet('safepal')">
                    <div class="wallet-icon safepal">S</div>
                    <div>
                        <strong>SafePal</strong>
                        <div style="font-size: 12px; color: #666;">–ú—É–ª—å—Ç–∏-–±–ª–æ–∫—á–µ–π–Ω –∫–æ—à–µ–ª—ë–∫</div>
                    </div>
                </div>
                <div class="wallet-item" onclick="connectWallet('trust')">
                    <div class="wallet-icon trust">T</div>
                    <div>
                        <strong>Trust Wallet</strong>
                        <div style="font-size: 12px; color: #666;">–ú–æ–±–∏–ª—å–Ω—ã–π –∫–æ—à–µ–ª—ë–∫</div>
                    </div>
                </div>
                <div class="wallet-item" onclick="connectWallet('coinbase')">
                    <div class="wallet-icon coinbase">C</div>
                    <div>
                        <strong>Coinbase Wallet</strong>
                        <div style="font-size: 12px; color: #666;">–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π –∫–æ—à–µ–ª—ë–∫</div>
                    </div>
                </div>
                <div class="wallet-item" onclick="connectWallet('metamask')">
                    <div class="wallet-icon metamask">M</div>
                    <div>
                        <strong>MetaMask</strong>
                        <div style="font-size: 12px; color: #666;">Ethereum –∫–æ—à–µ–ª—ë–∫</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ -->
    <div id="instructionModal" class="modal instruction-modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('instructionModal')">&times;</span>
            <h2>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é</h2>
            <p>–î–∏–ø–ª–∏–Ω–∫ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:</p>
            <ol class="instruction-steps">
                <li>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞ –∏–∑ App Store –∏–ª–∏ Google Play</li>
                <li>–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞</li>
                <li>–ù–∞–π–¥–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é "Browser" –∏–ª–∏ "DApp Browser"</li>
                <li>–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –Ω–∞—à–µ–≥–æ —Å–∞–π—Ç–∞: <strong>https://heronwaterwow.github.io/bookish-waffle/</strong></li>
                <li>–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª—ë–∫ –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ</li>
            </ol>
            <button class="connect-btn" onclick="closeModal('instructionModal')">
                –ü–æ–Ω—è—Ç–Ω–æ
            </button>
        </div>
    </div>

    <script>
        // –ö–ª–∞—Å—Å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –±—Ä–∞—É–∑–µ—Ä–∞
        class DeviceDetector {
            constructor() {
                this.userAgent = navigator.userAgent.toLowerCase();
                this.currentUrl = window.location.href;
            }

            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
            isMobile() {
                return /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(this.userAgent);
            }

            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ iOS
            isIOS() {
                return /iphone|ipad|ipod/i.test(this.userAgent);
            }

            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Android
            isAndroid() {
                return /android/i.test(this.userAgent);
            }

            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Safari
            isSafari() {
                return /safari/i.test(this.userAgent) && !/chrome|chromium|edg/i.test(this.userAgent);
            }

            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Chrome
            isChrome() {
                return /chrome/i.test(this.userAgent) && !/edg/i.test(this.userAgent);
            }

            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–æ–≤–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞
            getWalletBrowser() {
                // Phantom
                if (window.phantom?.solana || /phantom/i.test(this.userAgent)) {
                    return 'phantom';
                }
                
                // SafePal
                if (window.safepal || /safepal/i.test(this.userAgent)) {
                    return 'safepal';
                }
                
                // Trust Wallet
                if (window.trustwallet || /trust/i.test(this.userAgent)) {
                    return 'trust';
                }
                
                // Coinbase Wallet
                if (window.coinbaseWalletExtension || /coinbase/i.test(this.userAgent)) {
                    return 'coinbase';
                }
                
                // MetaMask Mobile
                if (window.ethereum?.isMetaMask || /metamask/i.test(this.userAgent)) {
                    return 'metamask';
                }
                
                return null;
            }

            // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±—Ä–∞—É–∑–µ—Ä–µ
            getBrowserInfo() {
                if (this.isSafari()) return 'Safari';
                if (this.isChrome()) return 'Chrome';
                if (/firefox/i.test(this.userAgent)) return 'Firefox';
                if (/edg/i.test(this.userAgent)) return 'Edge';
                if (/yabrowser/i.test(this.userAgent)) return '–Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä';
                if (/opera/i.test(this.userAgent)) return 'Opera';
                return '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä';
            }

            // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
            getDeviceInfo() {
                if (this.isIOS()) return 'iOS';
                if (this.isAndroid()) return 'Android';
                if (this.isMobile()) return '–ú–æ–±–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ';
                return '–î–µ—Å–∫—Ç–æ–ø';
            }
        }

        // –ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∏–ø–ª–∏–Ω–∫–∞–º–∏
        class DeepLinkHandler {
            constructor() {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π URL –¥–ª—è –¥–∏–ø–ª–∏–Ω–∫–æ–≤
                const targetUrl = 'https://heronwaterwow.github.io/bookish-waffle/';
                
                this.deepLinks = {
                    phantom: `phantom://open?url=${encodeURIComponent(targetUrl)}`,
                    safepal: `safepal://open?url=${encodeURIComponent(targetUrl)}`,
                    trust: `trust://open_url?url=${encodeURIComponent(targetUrl)}`,
                    coinbase: `cbwallet://open_url?url=${encodeURIComponent(targetUrl)}`,
                    metamask: `metamask://open?url=${encodeURIComponent(targetUrl)}`
                };
                
                this.targetUrl = targetUrl;
            }

            // –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–∏–ø–ª–∏–Ω–∫–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
            openDeepLink(walletType) {
                const deepLink = this.deepLinks[walletType];
                if (!deepLink) {
                    console.error('–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø –∫–æ—à–µ–ª—å–∫–∞:', walletType);
                    return;
                }

                console.log(`–û—Ç–∫—Ä—ã–≤–∞–µ–º –¥–∏–ø–ª–∏–Ω–∫ –¥–ª—è ${walletType}:`, deepLink);

                // –°–æ–∑–¥–∞–µ–º –Ω–µ–≤–∏–¥–∏–º—ã–π iframe –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –¥–∏–ø–ª–∏–Ω–∫–∞
                const iframe = document.createElement('iframe');
                iframe.style.display = 'none';
                iframe.src = deepLink;
                document.body.appendChild(iframe);

                // –£–¥–∞–ª—è–µ–º iframe —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à–æ–µ –≤—Ä–µ–º—è
                setTimeout(() => {
                    document.body.removeChild(iframe);
                }, 1000);

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã, –µ—Å–ª–∏ –¥–∏–ø–ª–∏–Ω–∫ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª
                setTimeout(() => {
                    this.showInstructionModal();
                }, 3000);
            }

            // –ü–æ–∫–∞–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
            showInstructionModal() {
                document.getElementById('currentUrl').textContent = this.targetUrl;
                showModal('instructionModal');
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ—Ç–µ–∫—Ç–æ—Ä–æ–≤
        const deviceDetector = new DeviceDetector();
        const deepLinkHandler = new DeepLinkHandler();

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        function updateDeviceInfo() {
            document.getElementById('deviceInfo').textContent = deviceDetector.getDeviceInfo();
            document.getElementById('browserInfo').textContent = deviceDetector.getBrowserInfo();
            
            const walletBrowser = deviceDetector.getWalletBrowser();
            document.getElementById('walletInfo').textContent = walletBrowser ? 
                `${walletBrowser.charAt(0).toUpperCase() + walletBrowser.slice(1)} –±—Ä–∞—É–∑–µ—Ä` : 
                '–û–±—ã—á–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä';
        }

        // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞
        function handleWalletConnection() {
            console.log('–ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞...');
            
            const isMobile = deviceDetector.isMobile();
            const walletBrowser = deviceDetector.getWalletBrowser();
            
            console.log('–ú–æ–±–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:', isMobile);
            console.log('–ö–æ—à–µ–ª—ë–∫ –±—Ä–∞—É–∑–µ—Ä:', walletBrowser);

            // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –º–æ–±–∏–ª—å–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ –∫–æ—à–µ–ª—å–∫–∞
            if (isMobile && walletBrowser) {
                console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –º–æ–±–∏–ª—å–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ –∫–æ—à–µ–ª—å–∫–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ');
                showWalletModal();
                return;
            }

            // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ, –Ω–æ –Ω–µ –≤ –∫–æ—à–µ–ª—å–∫–æ–≤–æ–º –±—Ä–∞—É–∑–µ—Ä–µ
            if (isMobile && !walletBrowser) {
                console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ, –Ω–æ –Ω–µ –≤ –∫–æ—à–µ–ª—å–∫–æ–≤–æ–º –±—Ä–∞—É–∑–µ—Ä–µ');
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ—à–µ–ª—ë–∫ –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
                const preferredWallet = deviceDetector.isIOS() ? 'phantom' : 'trust';
                console.log('–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞:', preferredWallet);
                
                deepLinkHandler.openDeepLink(preferredWallet);
                return;
            }

            // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ
            if (!isMobile) {
                console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ');
                showWalletModal();
                return;
            }
        }

        // –ü–æ–∫–∞–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å –∫–æ—à–µ–ª—å–∫–∞–º–∏
        function showWalletModal() {
            console.log('–ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –≤—ã–±–æ—Ä–æ–º –∫–æ—à–µ–ª—å–∫–æ–≤');
            showModal('walletModal');
        }

        // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞
        function connectWallet(walletType) {
            console.log('–ü–æ–¥–∫–ª—é—á–∞–µ–º –∫–æ—à–µ–ª—ë–∫:', walletType);
            
            const isMobile = deviceDetector.isMobile();
            const walletBrowser = deviceDetector.getWalletBrowser();

            // –ï—Å–ª–∏ –º—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∫–æ—à–µ–ª—å–∫–∞, –ø—ã—Ç–∞–µ–º—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É—é
            if (walletBrowser === walletType) {
                console.log('–ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –∫–æ—à–µ–ª—å–∫—É –Ω–∞–ø—Ä—è–º—É—é');
                connectWalletDirectly(walletType);
            } 
            // –ï—Å–ª–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ, –æ—Ç–∫—Ä—ã–≤–∞–µ–º –¥–∏–ø–ª–∏–Ω–∫
            else if (isMobile) {
                console.log('–û—Ç–∫—Ä—ã–≤–∞–µ–º –¥–∏–ø–ª–∏–Ω–∫ –¥–ª—è –∫–æ—à–µ–ª—å–∫–∞:', walletType);
                closeModal('walletModal');
                deepLinkHandler.openDeepLink(walletType);
            }
            // –ù–∞ –¥–µ—Å–∫—Ç–æ–ø–µ –ø—ã—Ç–∞–µ–º—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
            else {
                console.log('–ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è —á–µ—Ä–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞');
                connectWalletDirectly(walletType);
            }
        }

        // –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ—à–µ–ª—å–∫—É
        async function connectWalletDirectly(walletType) {
            try {
                let provider = null;

                switch (walletType) {
                    case 'phantom':
                        provider = window.phantom?.solana;
                        break;
                    case 'metamask':
                        provider = window.ethereum?.isMetaMask ? window.ethereum : null;
                        break;
                    case 'coinbase':
                        provider = window.coinbaseWalletExtension;
                        break;
                    case 'trust':
                        provider = window.trustwallet;
                        break;
                    case 'safepal':
                        provider = window.safepal;
                        break;
                }

                if (provider) {
                    console.log(`–ö–æ—à–µ–ª—ë–∫ ${walletType} –Ω–∞–π–¥–µ–Ω, –ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è...`);
                    
                    // –ó–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ª–æ–≥–∏–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫–æ—à–µ–ª—å–∫—É
                    // –î–ª—è –ø—Ä–∏–º–µ—Ä–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                    alert(`–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ ${walletType} —É—Å–ø–µ—à–Ω–æ!`);
                    closeModal('walletModal');
                } else {
                    console.log(`–ö–æ—à–µ–ª—ë–∫ ${walletType} –Ω–µ –Ω–∞–π–¥–µ–Ω`);
                    alert(`–ö–æ—à–µ–ª—ë–∫ ${walletType} –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω`);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞:', error);
                alert('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞');
            }
        }

        // –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏
        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            console.log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –¥–µ—Ç–µ–∫—Ç–æ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤');
            updateDeviceInfo();
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
            // handleWalletConnection();
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
        window.addEventListener('orientationchange', function() {
            setTimeout(updateDeviceInfo, 500);
        });

        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        function logDeviceInfo() {
            console.log('=== –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ ===');
            console.log('User Agent:', navigator.userAgent);
            console.log('–ú–æ–±–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:', deviceDetector.isMobile());
            console.log('iOS:', deviceDetector.isIOS());
            console.log('Android:', deviceDetector.isAndroid());
            console.log('Safari:', deviceDetector.isSafari());
            console.log('Chrome:', deviceDetector.isChrome());
            console.log('–ö–æ—à–µ–ª—ë–∫ –±—Ä–∞—É–∑–µ—Ä:', deviceDetector.getWalletBrowser());
            console.log('–î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –∫–æ—à–µ–ª—å–∫–æ–≤:');
            console.log('- window.phantom:', !!window.phantom);
            console.log('- window.ethereum:', !!window.ethereum);
            console.log('- window.trustwallet:', !!window.trustwallet);
            console.log('- window.coinbaseWalletExtension:', !!window.coinbaseWalletExtension);
            console.log('- window.safepal:', !!window.safepal);
        }

        // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ª–∞–¥–∫–∏
        logDeviceInfo();
    </script>
</body>
</html>
